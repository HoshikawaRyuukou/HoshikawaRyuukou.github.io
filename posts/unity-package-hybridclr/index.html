<!doctype html><html lang=zh-tw><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Unity - Package - HybridCLR | 識之箱庭</title><link rel=canonical href=https://HoshikawaRyuukou.github.io/posts/unity-package-hybridclr/><meta name=description content="紙上得來終覺淺，絕知此事要躬行。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Unity - Package - HybridCLR"><meta property="og:description" content="簡述 以下將著重在&#34;程式碼&#34;的熱更。
focus-creative-games/hybridclr 星數已經超過 ILRuntime 了，且中國那邊的主流框架幾乎都對其加入支援，是備受期待的存在。
HybridCLR 極大簡化過往麻煩且效率不彰的熱更流程。現在主流的方式有兩個：Lua 和 ILRuntime。但主流並不一定是好用的，也有可能只是迫不得已。主流兩者在筆者看來最難受的事是「侵入性」極強，有時為了熱更必須將業務邏輯移到 Lua 和 ILRuntime，搞得綁手綁腳。大家也都抱怨很久了，但也沒有其他可靠方案，直到 HybridCLR 出現。
HybridCLR 最讓人驚豔的地方在於，過往的開發流幾乎不用更動(不用寫 Lua 到處黏來黏去，只要寫好 C# 即可)，僅在打包時調整一下工作流即可。
執行 HybridCLR/Generate/All 執行 HybridCLR/CompileDll/xxx 將 熱更新的程序集和補充元數據的程序集 dlls 複製到指定目錄並進到資源管理中(Addressable) Build 沒錯就這樣即可。
此外 Unity 引擎開發團隊宣布，他們已開始將 Unity 引擎運行時從 Mono 遷移到 .NET CoreCLR。他們還會提供融合 JIT 和 AOT 的解決方案，Unity 團隊計劃在 2024 年發布新編輯器。(雖然常跳票就是了)，因此筆者相信 類HybridCLR 的作法在未來會成為主流做法，姑且先樂觀其成。
實測 為此筆者以一個小專案測試
App Module 主模組，非熱更模組(包含AOT) Navigation Module 熱更模組(應用程式是可以接受動態導航的) RockPaperScissors Module 熱更模組(一個簡單的猜拳應用) 模組之間的關係
App 啟動後會去下載 Navigation Module (一開始是沒有在本地) Navigation 有一組 UI 與下載 RockPaperScissors Module(也沒有在本地) 的邏輯段 測試結果 PC 與 Android 都可以完成動態加載邏輯與資源，且完全使用 C# 並以極低侵入完成熱更。在實作過程中反覆查了多次文件，確實需要一點成本來理解，但工作流(一次性)成型後便很舒服了。"><meta property="og:type" content="article"><meta property="og:url" content="https://HoshikawaRyuukou.github.io/posts/unity-package-hybridclr/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-11T21:11:00+00:00"><meta property="article:modified_time" content="2023-04-11T21:11:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Unity - Package - HybridCLR"><meta name=twitter:description content="簡述 以下將著重在&#34;程式碼&#34;的熱更。
focus-creative-games/hybridclr 星數已經超過 ILRuntime 了，且中國那邊的主流框架幾乎都對其加入支援，是備受期待的存在。
HybridCLR 極大簡化過往麻煩且效率不彰的熱更流程。現在主流的方式有兩個：Lua 和 ILRuntime。但主流並不一定是好用的，也有可能只是迫不得已。主流兩者在筆者看來最難受的事是「侵入性」極強，有時為了熱更必須將業務邏輯移到 Lua 和 ILRuntime，搞得綁手綁腳。大家也都抱怨很久了，但也沒有其他可靠方案，直到 HybridCLR 出現。
HybridCLR 最讓人驚豔的地方在於，過往的開發流幾乎不用更動(不用寫 Lua 到處黏來黏去，只要寫好 C# 即可)，僅在打包時調整一下工作流即可。
執行 HybridCLR/Generate/All 執行 HybridCLR/CompileDll/xxx 將 熱更新的程序集和補充元數據的程序集 dlls 複製到指定目錄並進到資源管理中(Addressable) Build 沒錯就這樣即可。
此外 Unity 引擎開發團隊宣布，他們已開始將 Unity 引擎運行時從 Mono 遷移到 .NET CoreCLR。他們還會提供融合 JIT 和 AOT 的解決方案，Unity 團隊計劃在 2024 年發布新編輯器。(雖然常跳票就是了)，因此筆者相信 類HybridCLR 的作法在未來會成為主流做法，姑且先樂觀其成。
實測 為此筆者以一個小專案測試
App Module 主模組，非熱更模組(包含AOT) Navigation Module 熱更模組(應用程式是可以接受動態導航的) RockPaperScissors Module 熱更模組(一個簡單的猜拳應用) 模組之間的關係
App 啟動後會去下載 Navigation Module (一開始是沒有在本地) Navigation 有一組 UI 與下載 RockPaperScissors Module(也沒有在本地) 的邏輯段 測試結果 PC 與 Android 都可以完成動態加載邏輯與資源，且完全使用 C# 並以極低侵入完成熱更。在實作過程中反覆查了多次文件，確實需要一點成本來理解，但工作流(一次性)成型後便很舒服了。"><link rel=stylesheet href=https://HoshikawaRyuukou.github.io/css/styles.9293a5aa5b416dbdce7874b0376fe51f0f87bf229c7ce1755fbd1781f23fa9827cd260fa3ddcf564888c14d68ee88809d3425b7342484bf1cb82d6d8371e51f5.css integrity="sha512-kpOlqltBbb3OeHSwN2/lHw+HvyKcfOF1X70XgfI/qYJ80mD6Pdz1ZIiMFNaO6IgJ00Jbc0JIS/HLgtbYNx5R9Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://HoshikawaRyuukou.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://HoshikawaRyuukou.github.io/posts/ai-stable-diffusion-%E5%BB%B6%E4%BC%B8/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&text=Unity%20-%20Package%20-%20HybridCLR" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&is_video=false&description=Unity%20-%20Package%20-%20HybridCLR" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Unity%20-%20Package%20-%20HybridCLR&body=Check out this article: https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&name=Unity%20-%20Package%20-%20HybridCLR&description=%e7%b0%a1%e8%bf%b0%20%e4%bb%a5%e4%b8%8b%e5%b0%87%e8%91%97%e9%87%8d%e5%9c%a8%26quot%3b%e7%a8%8b%e5%bc%8f%e7%a2%bc%26quot%3b%e7%9a%84%e7%86%b1%e6%9b%b4%e3%80%82%0afocus-creative-games%2fhybridclr%20%e6%98%9f%e6%95%b8%e5%b7%b2%e7%b6%93%e8%b6%85%e9%81%8e%20ILRuntime%20%e4%ba%86%ef%bc%8c%e4%b8%94%e4%b8%ad%e5%9c%8b%e9%82%a3%e9%82%8a%e7%9a%84%e4%b8%bb%e6%b5%81%e6%a1%86%e6%9e%b6%e5%b9%be%e4%b9%8e%e9%83%bd%e5%b0%8d%e5%85%b6%e5%8a%a0%e5%85%a5%e6%94%af%e6%8f%b4%ef%bc%8c%e6%98%af%e5%82%99%e5%8f%97%e6%9c%9f%e5%be%85%e7%9a%84%e5%ad%98%e5%9c%a8%e3%80%82%0aHybridCLR%20%e6%a5%b5%e5%a4%a7%e7%b0%a1%e5%8c%96%e9%81%8e%e5%be%80%e9%ba%bb%e7%85%a9%e4%b8%94%e6%95%88%e7%8e%87%e4%b8%8d%e5%bd%b0%e7%9a%84%e7%86%b1%e6%9b%b4%e6%b5%81%e7%a8%8b%e3%80%82%e7%8f%be%e5%9c%a8%e4%b8%bb%e6%b5%81%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9c%89%e5%85%a9%e5%80%8b%ef%bc%9aLua%20%e5%92%8c%20ILRuntime%e3%80%82%e4%bd%86%e4%b8%bb%e6%b5%81%e4%b8%a6%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%98%af%e5%a5%bd%e7%94%a8%e7%9a%84%ef%bc%8c%e4%b9%9f%e6%9c%89%e5%8f%af%e8%83%bd%e5%8f%aa%e6%98%af%e8%bf%ab%e4%b8%8d%e5%be%97%e5%b7%b2%e3%80%82%e4%b8%bb%e6%b5%81%e5%85%a9%e8%80%85%e5%9c%a8%e7%ad%86%e8%80%85%e7%9c%8b%e4%be%86%e6%9c%80%e9%9b%a3%e5%8f%97%e7%9a%84%e4%ba%8b%e6%98%af%e3%80%8c%e4%be%b5%e5%85%a5%e6%80%a7%e3%80%8d%e6%a5%b5%e5%bc%b7%ef%bc%8c%e6%9c%89%e6%99%82%e7%82%ba%e4%ba%86%e7%86%b1%e6%9b%b4%e5%bf%85%e9%a0%88%e5%b0%87%e6%a5%ad%e5%8b%99%e9%82%8f%e8%bc%af%e7%a7%bb%e5%88%b0%20Lua%20%e5%92%8c%20ILRuntime%ef%bc%8c%e6%90%9e%e5%be%97%e7%b6%81%e6%89%8b%e7%b6%81%e8%85%b3%e3%80%82%e5%a4%a7%e5%ae%b6%e4%b9%9f%e9%83%bd%e6%8a%b1%e6%80%a8%e5%be%88%e4%b9%85%e4%ba%86%ef%bc%8c%e4%bd%86%e4%b9%9f%e6%b2%92%e6%9c%89%e5%85%b6%e4%bb%96%e5%8f%af%e9%9d%a0%e6%96%b9%e6%a1%88%ef%bc%8c%e7%9b%b4%e5%88%b0%20HybridCLR%20%e5%87%ba%e7%8f%be%e3%80%82%0aHybridCLR%20%e6%9c%80%e8%ae%93%e4%ba%ba%e9%a9%9a%e8%b1%94%e7%9a%84%e5%9c%b0%e6%96%b9%e5%9c%a8%e6%96%bc%ef%bc%8c%e9%81%8e%e5%be%80%e7%9a%84%e9%96%8b%e7%99%bc%e6%b5%81%e5%b9%be%e4%b9%8e%e4%b8%8d%e7%94%a8%e6%9b%b4%e5%8b%95%28%e4%b8%8d%e7%94%a8%e5%af%ab%20Lua%20%e5%88%b0%e8%99%95%e9%bb%8f%e4%be%86%e9%bb%8f%e5%8e%bb%ef%bc%8c%e5%8f%aa%e8%a6%81%e5%af%ab%e5%a5%bd%20C%23%20%e5%8d%b3%e5%8f%af%29%ef%bc%8c%e5%83%85%e5%9c%a8%e6%89%93%e5%8c%85%e6%99%82%e8%aa%bf%e6%95%b4%e4%b8%80%e4%b8%8b%e5%b7%a5%e4%bd%9c%e6%b5%81%e5%8d%b3%e5%8f%af%e3%80%82%0a%e5%9f%b7%e8%a1%8c%20HybridCLR%2fGenerate%2fAll%20%e5%9f%b7%e8%a1%8c%20HybridCLR%2fCompileDll%2fxxx%20%e5%b0%87%20%e7%86%b1%e6%9b%b4%e6%96%b0%e7%9a%84%e7%a8%8b%e5%ba%8f%e9%9b%86%e5%92%8c%e8%a3%9c%e5%85%85%e5%85%83%e6%95%b8%e6%93%9a%e7%9a%84%e7%a8%8b%e5%ba%8f%e9%9b%86%20dlls%20%e8%a4%87%e8%a3%bd%e5%88%b0%e6%8c%87%e5%ae%9a%e7%9b%ae%e9%8c%84%e4%b8%a6%e9%80%b2%e5%88%b0%e8%b3%87%e6%ba%90%e7%ae%a1%e7%90%86%e4%b8%ad%28Addressable%29%20Build%20%e6%b2%92%e9%8c%af%e5%b0%b1%e9%80%99%e6%a8%a3%e5%8d%b3%e5%8f%af%e3%80%82%0a%e6%ad%a4%e5%a4%96%20Unity%20%e5%bc%95%e6%93%8e%e9%96%8b%e7%99%bc%e5%9c%98%e9%9a%8a%e5%ae%a3%e5%b8%83%ef%bc%8c%e4%bb%96%e5%80%91%e5%b7%b2%e9%96%8b%e5%a7%8b%e5%b0%87%20Unity%20%e5%bc%95%e6%93%8e%e9%81%8b%e8%a1%8c%e6%99%82%e5%be%9e%20Mono%20%e9%81%b7%e7%a7%bb%e5%88%b0%20.NET%20CoreCLR%e3%80%82%e4%bb%96%e5%80%91%e9%82%84%e6%9c%83%e6%8f%90%e4%be%9b%e8%9e%8d%e5%90%88%20JIT%20%e5%92%8c%20AOT%20%e7%9a%84%e8%a7%a3%e6%b1%ba%e6%96%b9%e6%a1%88%ef%bc%8cUnity%20%e5%9c%98%e9%9a%8a%e8%a8%88%e5%8a%83%e5%9c%a8%202024%20%e5%b9%b4%e7%99%bc%e5%b8%83%e6%96%b0%e7%b7%a8%e8%bc%af%e5%99%a8%e3%80%82%28%e9%9b%96%e7%84%b6%e5%b8%b8%e8%b7%b3%e7%a5%a8%e5%b0%b1%e6%98%af%e4%ba%86%29%ef%bc%8c%e5%9b%a0%e6%ad%a4%e7%ad%86%e8%80%85%e7%9b%b8%e4%bf%a1%20%e9%a1%9eHybridCLR%20%e7%9a%84%e4%bd%9c%e6%b3%95%e5%9c%a8%e6%9c%aa%e4%be%86%e6%9c%83%e6%88%90%e7%82%ba%e4%b8%bb%e6%b5%81%e5%81%9a%e6%b3%95%ef%bc%8c%e5%a7%91%e4%b8%94%e5%85%88%e6%a8%82%e8%a7%80%e5%85%b6%e6%88%90%e3%80%82%0a%e5%af%a6%e6%b8%ac%20%e7%82%ba%e6%ad%a4%e7%ad%86%e8%80%85%e4%bb%a5%e4%b8%80%e5%80%8b%e5%b0%8f%e5%b0%88%e6%a1%88%e6%b8%ac%e8%a9%a6%0aApp%20Module%20%e4%b8%bb%e6%a8%a1%e7%b5%84%ef%bc%8c%e9%9d%9e%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e5%8c%85%e5%90%abAOT%29%20Navigation%20Module%20%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e6%87%89%e7%94%a8%e7%a8%8b%e5%bc%8f%e6%98%af%e5%8f%af%e4%bb%a5%e6%8e%a5%e5%8f%97%e5%8b%95%e6%85%8b%e5%b0%8e%e8%88%aa%e7%9a%84%29%20RockPaperScissors%20Module%20%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e4%b8%80%e5%80%8b%e7%b0%a1%e5%96%ae%e7%9a%84%e7%8c%9c%e6%8b%b3%e6%87%89%e7%94%a8%29%20%e6%a8%a1%e7%b5%84%e4%b9%8b%e9%96%93%e7%9a%84%e9%97%9c%e4%bf%82%0aApp%20%e5%95%9f%e5%8b%95%e5%be%8c%e6%9c%83%e5%8e%bb%e4%b8%8b%e8%bc%89%20Navigation%20Module%20%28%e4%b8%80%e9%96%8b%e5%a7%8b%e6%98%af%e6%b2%92%e6%9c%89%e5%9c%a8%e6%9c%ac%e5%9c%b0%29%20Navigation%20%e6%9c%89%e4%b8%80%e7%b5%84%20UI%20%e8%88%87%e4%b8%8b%e8%bc%89%20RockPaperScissors%20Module%28%e4%b9%9f%e6%b2%92%e6%9c%89%e5%9c%a8%e6%9c%ac%e5%9c%b0%29%20%e7%9a%84%e9%82%8f%e8%bc%af%e6%ae%b5%20%e6%b8%ac%e8%a9%a6%e7%b5%90%e6%9e%9c%20PC%20%e8%88%87%20Android%20%e9%83%bd%e5%8f%af%e4%bb%a5%e5%ae%8c%e6%88%90%e5%8b%95%e6%85%8b%e5%8a%a0%e8%bc%89%e9%82%8f%e8%bc%af%e8%88%87%e8%b3%87%e6%ba%90%ef%bc%8c%e4%b8%94%e5%ae%8c%e5%85%a8%e4%bd%bf%e7%94%a8%20C%23%20%e4%b8%a6%e4%bb%a5%e6%a5%b5%e4%bd%8e%e4%be%b5%e5%85%a5%e5%ae%8c%e6%88%90%e7%86%b1%e6%9b%b4%e3%80%82%e5%9c%a8%e5%af%a6%e4%bd%9c%e9%81%8e%e7%a8%8b%e4%b8%ad%e5%8f%8d%e8%a6%86%e6%9f%a5%e4%ba%86%e5%a4%9a%e6%ac%a1%e6%96%87%e4%bb%b6%ef%bc%8c%e7%a2%ba%e5%af%a6%e9%9c%80%e8%a6%81%e4%b8%80%e9%bb%9e%e6%88%90%e6%9c%ac%e4%be%86%e7%90%86%e8%a7%a3%ef%bc%8c%e4%bd%86%e5%b7%a5%e4%bd%9c%e6%b5%81%28%e4%b8%80%e6%ac%a1%e6%80%a7%29%e6%88%90%e5%9e%8b%e5%be%8c%e4%be%bf%e5%be%88%e8%88%92%e6%9c%8d%e4%ba%86%e3%80%82" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&t=Unity%20-%20Package%20-%20HybridCLR" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#簡述>簡述</a></li><li><a href=#實測>實測</a></li><li><a href=#official>Official</a></li><li><a href=#guide-基本流程不太大變動但用法以官方最新為主>Guide (基本流程不太大變動，但用法以官方最新為主)</a></li><li><a href=#搭配-addressable-使用>搭配 Addressable 使用</a></li><li><a href=#faq>FAQ</a></li><li><a href=#注意>注意</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Unity - Package - HybridCLR</h1><div class=meta><div class=postdate><time datetime="2023-04-11 21:11:00 +0000 UTC" itemprop=datePublished>2023-04-11</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/unity rel=tag>Unity</a></div></div></header><div class=content itemprop=articleBody><h2 id=簡述>簡述</h2><p>以下將著重在"程式碼"的熱更。</p><p><a href=https://github.com/focus-creative-games/hybridclr>focus-creative-games/hybridclr</a>
星數已經超過 ILRuntime 了，且中國那邊的主流框架幾乎都對其加入支援，是備受期待的存在。</p><p>HybridCLR 極大簡化過往麻煩且效率不彰的熱更流程。現在主流的方式有兩個：Lua 和 ILRuntime。但主流並不一定是好用的，也有可能只是迫不得已。主流兩者在筆者看來最難受的事是「侵入性」極強，有時為了熱更必須將業務邏輯移到 Lua 和 ILRuntime，搞得綁手綁腳。大家也都抱怨很久了，但也沒有其他可靠方案，直到 HybridCLR 出現。</p><p>HybridCLR 最讓人驚豔的地方在於，過往的開發流幾乎不用更動(不用寫 Lua 到處黏來黏去，只要寫好 C# 即可)，僅在打包時調整一下工作流即可。</p><ul><li>執行 HybridCLR/Generate/All</li><li>執行 HybridCLR/CompileDll/xxx</li><li>將 熱更新的程序集和補充元數據的程序集 dlls 複製到指定目錄並進到資源管理中(Addressable)</li><li>Build</li></ul><p>沒錯就這樣即可。</p><p>此外 Unity 引擎開發團隊宣布，他們已開始將 Unity 引擎運行時從 Mono 遷移到 .NET CoreCLR。他們還會提供融合 JIT 和 AOT 的解決方案，Unity 團隊計劃在 2024 年發布新編輯器。(雖然常跳票就是了)，因此筆者相信 類HybridCLR 的作法在未來會成為主流做法，姑且先樂觀其成。</p><h2 id=實測>實測</h2><p>為此筆者以一個小專案測試</p><ul><li>App Module 主模組，非熱更模組(包含AOT)</li><li>Navigation Module 熱更模組(應用程式是可以接受動態導航的)</li><li>RockPaperScissors Module 熱更模組(一個簡單的猜拳應用)</li></ul><p>模組之間的關係</p><ul><li>App 啟動後會去下載 Navigation Module (一開始是沒有在本地)</li><li>Navigation 有一組 UI 與下載 RockPaperScissors Module(也沒有在本地) 的邏輯段</li></ul><p>測試結果 PC 與 Android 都可以完成動態加載邏輯與資源，且完全使用 C# 並以極低侵入完成熱更。在實作過程中反覆查了多次文件，確實需要一點成本來理解，但工作流(一次性)成型後便很舒服了。</p><h2 id=official>Official</h2><ul><li><a href=https://focus-creative-games.github.io/hybridclr/about/>关于HybridCLR</a></li><li><a href=https://github.com/focus-creative-games/hybridclr>focus-creative-games/hybridclr</a></li><li><a href=https://github.com/focus-creative-games/hybridclr_trial>focus-creative-games/hybridclr_trial</a></li><li><a href=https://github.com/focus-creative-games/hybridclr_unity>focus-creative-games/hybridclr_unity</a></li><li><a href=https://www.zhihu.com/column/c_1489549396035870720>HybridCLR c#热更新</a></li></ul><h2 id=guide-基本流程不太大變動但用法以官方最新為主>Guide (基本流程不太大變動，但用法以官方最新為主)</h2><ul><li><a href=https://zhuanlan.zhihu.com/p/555544193>一小时极速掌握HybridCLR热更新</a></li><li><a href=https://blog.csdn.net/q764424567/article/details/124835067>【Unity3D热更新】Unity3D 零成本、高性能的C#的热更新框架：HybridCLR</a></li><li><a href=https://www.jianshu.com/p/51a9a757d238>基于华佗热更新(HybridCLR)的热更新方案设计和接入</a></li><li><a href=https://www.lfzxb.top/hybridclr-source-analyze/>划时代的代码热更新方案hybridclr（wolong）源码流程解析</a></li><li><a href="https://www.bilibili.com/video/BV1pj411u7Jq?t=8.7">HybridCLR2.0.6+Yooasset+Unitask</a></li><li><a href=https://blog.csdn.net/weixin_43830069/article/details/129855550>HybridCLR 热更新配置</a></li><li><a href=https://blog.csdn.net/NRatel/article/details/127355276>HybridCLR 探索</a></li><li><a href="https://so.csdn.net/so/search?spm=1001.2101.3001.4498&q=HybridCLR&t=blog&u=&s=new&m=&chatId=&tm=90">CSDN Search</a></li></ul><h2 id=搭配-addressable-使用>搭配 Addressable 使用</h2><ul><li><a href=https://blog.csdn.net/qq_40080418/article/details/125599135>HybridCLR+Addressables资源代码全热更框架 二</a></li><li><a href="http://chicai.group/?p=1561">制作一个承载想法的东西（十三）—— 使用HybridCLR进行代码热更新</a></li></ul><h2 id=faq>FAQ</h2><p>在 github issue 上有一些重要的資訊</p><ul><li><a href=https://github.com/focus-creative-games/hybridclr/issues/57>请问，Generate All、补充元数据的DLL更新的执行时机的最佳实践？</a></li><li><a href=https://github.com/focus-creative-games/hybridclr/issues/19>怎么卸载热更dll</a></li></ul><h2 id=注意>注意</h2><ul><li>打包前運行 HybridCLR/Generate/All (打包前需要做一些防裁剪link.xml生成、橋接函數生成之類的工作)</li><li>僅僅是編譯熱更新 dll 或者將熱更新 dll 加入熱更新資源管理系統，不需要執行 HybridCLR/generate 下的命令。</li><li>補充元數據的 dll 的生成需要事先打包一次，每個平台都需要打包一次。不要走正式的打包流程，只需要點擊 Unity 的 Build 即可。</li><li>CLI 規範中只能以 AppDomain 形式卸載所有 dll，不支持卸載單獨的 dll。而 il2cpp 是單例 AppDomain，因此這個要求是不符合規範的。要採用 HybridCLR DHE 的商業方案。不過筆者倒是不太擔心，畢竟 Unity client 通常不是需要常駐的應用，使用者也不太會把應用的每一個功能都點一遍，初估是還可以接受的。</li></ul></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#簡述>簡述</a></li><li><a href=#實測>實測</a></li><li><a href=#official>Official</a></li><li><a href=#guide-基本流程不太大變動但用法以官方最新為主>Guide (基本流程不太大變動，但用法以官方最新為主)</a></li><li><a href=#搭配-addressable-使用>搭配 Addressable 使用</a></li><li><a href=#faq>FAQ</a></li><li><a href=#注意>注意</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&text=Unity%20-%20Package%20-%20HybridCLR" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&is_video=false&description=Unity%20-%20Package%20-%20HybridCLR" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Unity%20-%20Package%20-%20HybridCLR&body=Check out this article: https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&title=Unity%20-%20Package%20-%20HybridCLR" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&name=Unity%20-%20Package%20-%20HybridCLR&description=%e7%b0%a1%e8%bf%b0%20%e4%bb%a5%e4%b8%8b%e5%b0%87%e8%91%97%e9%87%8d%e5%9c%a8%26quot%3b%e7%a8%8b%e5%bc%8f%e7%a2%bc%26quot%3b%e7%9a%84%e7%86%b1%e6%9b%b4%e3%80%82%0afocus-creative-games%2fhybridclr%20%e6%98%9f%e6%95%b8%e5%b7%b2%e7%b6%93%e8%b6%85%e9%81%8e%20ILRuntime%20%e4%ba%86%ef%bc%8c%e4%b8%94%e4%b8%ad%e5%9c%8b%e9%82%a3%e9%82%8a%e7%9a%84%e4%b8%bb%e6%b5%81%e6%a1%86%e6%9e%b6%e5%b9%be%e4%b9%8e%e9%83%bd%e5%b0%8d%e5%85%b6%e5%8a%a0%e5%85%a5%e6%94%af%e6%8f%b4%ef%bc%8c%e6%98%af%e5%82%99%e5%8f%97%e6%9c%9f%e5%be%85%e7%9a%84%e5%ad%98%e5%9c%a8%e3%80%82%0aHybridCLR%20%e6%a5%b5%e5%a4%a7%e7%b0%a1%e5%8c%96%e9%81%8e%e5%be%80%e9%ba%bb%e7%85%a9%e4%b8%94%e6%95%88%e7%8e%87%e4%b8%8d%e5%bd%b0%e7%9a%84%e7%86%b1%e6%9b%b4%e6%b5%81%e7%a8%8b%e3%80%82%e7%8f%be%e5%9c%a8%e4%b8%bb%e6%b5%81%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9c%89%e5%85%a9%e5%80%8b%ef%bc%9aLua%20%e5%92%8c%20ILRuntime%e3%80%82%e4%bd%86%e4%b8%bb%e6%b5%81%e4%b8%a6%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%98%af%e5%a5%bd%e7%94%a8%e7%9a%84%ef%bc%8c%e4%b9%9f%e6%9c%89%e5%8f%af%e8%83%bd%e5%8f%aa%e6%98%af%e8%bf%ab%e4%b8%8d%e5%be%97%e5%b7%b2%e3%80%82%e4%b8%bb%e6%b5%81%e5%85%a9%e8%80%85%e5%9c%a8%e7%ad%86%e8%80%85%e7%9c%8b%e4%be%86%e6%9c%80%e9%9b%a3%e5%8f%97%e7%9a%84%e4%ba%8b%e6%98%af%e3%80%8c%e4%be%b5%e5%85%a5%e6%80%a7%e3%80%8d%e6%a5%b5%e5%bc%b7%ef%bc%8c%e6%9c%89%e6%99%82%e7%82%ba%e4%ba%86%e7%86%b1%e6%9b%b4%e5%bf%85%e9%a0%88%e5%b0%87%e6%a5%ad%e5%8b%99%e9%82%8f%e8%bc%af%e7%a7%bb%e5%88%b0%20Lua%20%e5%92%8c%20ILRuntime%ef%bc%8c%e6%90%9e%e5%be%97%e7%b6%81%e6%89%8b%e7%b6%81%e8%85%b3%e3%80%82%e5%a4%a7%e5%ae%b6%e4%b9%9f%e9%83%bd%e6%8a%b1%e6%80%a8%e5%be%88%e4%b9%85%e4%ba%86%ef%bc%8c%e4%bd%86%e4%b9%9f%e6%b2%92%e6%9c%89%e5%85%b6%e4%bb%96%e5%8f%af%e9%9d%a0%e6%96%b9%e6%a1%88%ef%bc%8c%e7%9b%b4%e5%88%b0%20HybridCLR%20%e5%87%ba%e7%8f%be%e3%80%82%0aHybridCLR%20%e6%9c%80%e8%ae%93%e4%ba%ba%e9%a9%9a%e8%b1%94%e7%9a%84%e5%9c%b0%e6%96%b9%e5%9c%a8%e6%96%bc%ef%bc%8c%e9%81%8e%e5%be%80%e7%9a%84%e9%96%8b%e7%99%bc%e6%b5%81%e5%b9%be%e4%b9%8e%e4%b8%8d%e7%94%a8%e6%9b%b4%e5%8b%95%28%e4%b8%8d%e7%94%a8%e5%af%ab%20Lua%20%e5%88%b0%e8%99%95%e9%bb%8f%e4%be%86%e9%bb%8f%e5%8e%bb%ef%bc%8c%e5%8f%aa%e8%a6%81%e5%af%ab%e5%a5%bd%20C%23%20%e5%8d%b3%e5%8f%af%29%ef%bc%8c%e5%83%85%e5%9c%a8%e6%89%93%e5%8c%85%e6%99%82%e8%aa%bf%e6%95%b4%e4%b8%80%e4%b8%8b%e5%b7%a5%e4%bd%9c%e6%b5%81%e5%8d%b3%e5%8f%af%e3%80%82%0a%e5%9f%b7%e8%a1%8c%20HybridCLR%2fGenerate%2fAll%20%e5%9f%b7%e8%a1%8c%20HybridCLR%2fCompileDll%2fxxx%20%e5%b0%87%20%e7%86%b1%e6%9b%b4%e6%96%b0%e7%9a%84%e7%a8%8b%e5%ba%8f%e9%9b%86%e5%92%8c%e8%a3%9c%e5%85%85%e5%85%83%e6%95%b8%e6%93%9a%e7%9a%84%e7%a8%8b%e5%ba%8f%e9%9b%86%20dlls%20%e8%a4%87%e8%a3%bd%e5%88%b0%e6%8c%87%e5%ae%9a%e7%9b%ae%e9%8c%84%e4%b8%a6%e9%80%b2%e5%88%b0%e8%b3%87%e6%ba%90%e7%ae%a1%e7%90%86%e4%b8%ad%28Addressable%29%20Build%20%e6%b2%92%e9%8c%af%e5%b0%b1%e9%80%99%e6%a8%a3%e5%8d%b3%e5%8f%af%e3%80%82%0a%e6%ad%a4%e5%a4%96%20Unity%20%e5%bc%95%e6%93%8e%e9%96%8b%e7%99%bc%e5%9c%98%e9%9a%8a%e5%ae%a3%e5%b8%83%ef%bc%8c%e4%bb%96%e5%80%91%e5%b7%b2%e9%96%8b%e5%a7%8b%e5%b0%87%20Unity%20%e5%bc%95%e6%93%8e%e9%81%8b%e8%a1%8c%e6%99%82%e5%be%9e%20Mono%20%e9%81%b7%e7%a7%bb%e5%88%b0%20.NET%20CoreCLR%e3%80%82%e4%bb%96%e5%80%91%e9%82%84%e6%9c%83%e6%8f%90%e4%be%9b%e8%9e%8d%e5%90%88%20JIT%20%e5%92%8c%20AOT%20%e7%9a%84%e8%a7%a3%e6%b1%ba%e6%96%b9%e6%a1%88%ef%bc%8cUnity%20%e5%9c%98%e9%9a%8a%e8%a8%88%e5%8a%83%e5%9c%a8%202024%20%e5%b9%b4%e7%99%bc%e5%b8%83%e6%96%b0%e7%b7%a8%e8%bc%af%e5%99%a8%e3%80%82%28%e9%9b%96%e7%84%b6%e5%b8%b8%e8%b7%b3%e7%a5%a8%e5%b0%b1%e6%98%af%e4%ba%86%29%ef%bc%8c%e5%9b%a0%e6%ad%a4%e7%ad%86%e8%80%85%e7%9b%b8%e4%bf%a1%20%e9%a1%9eHybridCLR%20%e7%9a%84%e4%bd%9c%e6%b3%95%e5%9c%a8%e6%9c%aa%e4%be%86%e6%9c%83%e6%88%90%e7%82%ba%e4%b8%bb%e6%b5%81%e5%81%9a%e6%b3%95%ef%bc%8c%e5%a7%91%e4%b8%94%e5%85%88%e6%a8%82%e8%a7%80%e5%85%b6%e6%88%90%e3%80%82%0a%e5%af%a6%e6%b8%ac%20%e7%82%ba%e6%ad%a4%e7%ad%86%e8%80%85%e4%bb%a5%e4%b8%80%e5%80%8b%e5%b0%8f%e5%b0%88%e6%a1%88%e6%b8%ac%e8%a9%a6%0aApp%20Module%20%e4%b8%bb%e6%a8%a1%e7%b5%84%ef%bc%8c%e9%9d%9e%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e5%8c%85%e5%90%abAOT%29%20Navigation%20Module%20%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e6%87%89%e7%94%a8%e7%a8%8b%e5%bc%8f%e6%98%af%e5%8f%af%e4%bb%a5%e6%8e%a5%e5%8f%97%e5%8b%95%e6%85%8b%e5%b0%8e%e8%88%aa%e7%9a%84%29%20RockPaperScissors%20Module%20%e7%86%b1%e6%9b%b4%e6%a8%a1%e7%b5%84%28%e4%b8%80%e5%80%8b%e7%b0%a1%e5%96%ae%e7%9a%84%e7%8c%9c%e6%8b%b3%e6%87%89%e7%94%a8%29%20%e6%a8%a1%e7%b5%84%e4%b9%8b%e9%96%93%e7%9a%84%e9%97%9c%e4%bf%82%0aApp%20%e5%95%9f%e5%8b%95%e5%be%8c%e6%9c%83%e5%8e%bb%e4%b8%8b%e8%bc%89%20Navigation%20Module%20%28%e4%b8%80%e9%96%8b%e5%a7%8b%e6%98%af%e6%b2%92%e6%9c%89%e5%9c%a8%e6%9c%ac%e5%9c%b0%29%20Navigation%20%e6%9c%89%e4%b8%80%e7%b5%84%20UI%20%e8%88%87%e4%b8%8b%e8%bc%89%20RockPaperScissors%20Module%28%e4%b9%9f%e6%b2%92%e6%9c%89%e5%9c%a8%e6%9c%ac%e5%9c%b0%29%20%e7%9a%84%e9%82%8f%e8%bc%af%e6%ae%b5%20%e6%b8%ac%e8%a9%a6%e7%b5%90%e6%9e%9c%20PC%20%e8%88%87%20Android%20%e9%83%bd%e5%8f%af%e4%bb%a5%e5%ae%8c%e6%88%90%e5%8b%95%e6%85%8b%e5%8a%a0%e8%bc%89%e9%82%8f%e8%bc%af%e8%88%87%e8%b3%87%e6%ba%90%ef%bc%8c%e4%b8%94%e5%ae%8c%e5%85%a8%e4%bd%bf%e7%94%a8%20C%23%20%e4%b8%a6%e4%bb%a5%e6%a5%b5%e4%bd%8e%e4%be%b5%e5%85%a5%e5%ae%8c%e6%88%90%e7%86%b1%e6%9b%b4%e3%80%82%e5%9c%a8%e5%af%a6%e4%bd%9c%e9%81%8e%e7%a8%8b%e4%b8%ad%e5%8f%8d%e8%a6%86%e6%9f%a5%e4%ba%86%e5%a4%9a%e6%ac%a1%e6%96%87%e4%bb%b6%ef%bc%8c%e7%a2%ba%e5%af%a6%e9%9c%80%e8%a6%81%e4%b8%80%e9%bb%9e%e6%88%90%e6%9c%ac%e4%be%86%e7%90%86%e8%a7%a3%ef%bc%8c%e4%bd%86%e5%b7%a5%e4%bd%9c%e6%b5%81%28%e4%b8%80%e6%ac%a1%e6%80%a7%29%e6%88%90%e5%9e%8b%e5%be%8c%e4%be%bf%e5%be%88%e8%88%92%e6%9c%8d%e4%ba%86%e3%80%82" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fHoshikawaRyuukou.github.io%2fposts%2funity-package-hybridclr%2f&t=Unity%20-%20Package%20-%20HybridCLR" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 HoshikawaRyuukou</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Writings</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>